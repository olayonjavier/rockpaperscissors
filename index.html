<!DOCTYPE html>
<html>
<head>
  <title>Rock Paper Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>
    let moves = ['Rock', 'Paper', 'Scissors']; 
    String.prototype.equalsIgnoreCase = function (compareString) { return this.toUpperCase() === compareString.toUpperCase();}; 

    function computerPlay(){
        return moves[Math.floor(Math.random() * Math.floor(3))]; 
    }

    function rockLogic(computerSelection){
        if(computerSelection === moves[0]){
            return `You tied! ${moves[0]} ties with ${computerSelection}`;
        } else if(computerSelection === moves[1]){
            return `You lose! ${computerSelection} beats ${moves[0]}`;
        } else if (computerSelection === moves[2]){
            return `You win! ${moves[0]} beats ${computerSelection}`;
        }
    }

    function paperLogic(computerSelection){
        if(computerSelection === moves[0]){
            return `You win! ${moves[1]} beats ${computerSelection}`;
        } else if (computerSelection === moves[1]){
            return `You tied! ${moves[1]} ties with ${computerSelection}`;
        } else if(computerSelection === moves[2]){
            return `You lose! ${computerSelection} beats with ${moves[0]}`;
        }
    }

    function scissorsLogic(computerSelection){
        if(computerSelection === moves[2]){
            return `You lose! ${computerSelection} beats with ${moves[0]}`;
        } else if (computerSelection === moves[1]){
            return `You win! ${moves[2]} beats ${computerSelection}`;
        } else if(computerSelection === moves[2]){
            return `You tied! ${moves[2]} ties with ${computerSelection}`;
        }
    }

    function playRound(playerSelection, computerSelection){
        if(playerSelection === moves[0]){ 
            //console.log(`playRound got ${playerSelection} from player and ${computerSelection} from computer`);
            return rockLogic(computerSelection);
        } else if(playerSelection === moves[1]){
            //console.log(`playRound got ${playerSelection} from player and ${computerSelection} from computer`);
            return paperLogic(computerSelection);
        } else if(playerSelection === moves[2]){
            //console.log(`playRound got ${playerSelection} from player and ${computerSelection} from computer`);
            return scissorsLogic(computerSelection);
        } else{
            return "Invalid move";
        }
    }

    function game(){
        let winCount = 0;
        for(let i = 0; i < 5; i++){
            const playerSelection = parsePrompt(prompt("Enter Rock, Paper, Scissors: "));
            const computerSelection = computerPlay();
            console.log(`Computer got ${computerSelection}`);
            let result = playRound(playerSelection, computerSelection);
            console.log(result);
            if(result.includes("win")){
                console.log(`Recording a win`);
                winCount++;
            }
        }
        console.log(`You beat the computer ${winCount} time(s)!`);
    }

    function parsePrompt(input){
        if (input.equalsIgnoreCase(moves[0])){
            console.log(`Got ${moves[0]}`);
            return moves[0];
        } else if(input.equalsIgnoreCase(moves[1])){
            console.log(`Got ${moves[1]}`);
            return moves[1];
        } else if(input.equalsIgnoreCase(moves[2])){
            console.log(`Got ${moves[2]}`);
            return moves[2];
        } else{
            return "invalid";
        }
    }
    
    //console.log(`player got ${playerSelection}`);
    //console.log(playRound(playerSelection, computerSelection));
    game();

  </script>
</body>
</html>